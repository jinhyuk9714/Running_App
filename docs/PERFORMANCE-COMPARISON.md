# 🏃 Running App 성능 최적화 비교 리포트

> 생성일: 2026-02-05

## 📊 종합 요약

| 지표 | Baseline | Optimized | 개선 |
|------|----------|-----------|------|
| **처리량 (TPS)** | 69.88 req/s | **90.16 req/s** | **+29%** ⬆️ |
| **평균 응답시간** | 15.67ms | **14.97ms** | -4.5% ⬇️ |
| **P95 응답시간** | 75.36ms | **71.77ms** | -4.8% ⬇️ |
| **최대 응답시간** | 129.58ms | **110.59ms** | -14.7% ⬇️ |
| **에러율** | 0.00% | 0.00% | 안정적 ✅ |

> ⚠️ **참고**: Baseline은 50 VUs, Optimized는 100 VUs로 테스트됨.
> 부하가 2배 증가했음에도 응답시간이 개선되고 처리량이 29% 증가.

## 🔍 엔드포인트별 성능

| API | Baseline | Optimized | 개선율 |
|-----|----------|-----------|--------|
| POST /api/auth/login | 73.64ms | 70.88ms | **3.7%** |
| GET /api/activities | 1.55ms | 1.29ms | **16.8%** |
| GET /api/activities/summary | 1.01ms | 0.94ms | **6.9%** |
| GET /api/challenges | 1.16ms | 0.98ms | **15.5%** |
| GET /api/plans | 1.18ms | 1.03ms | **12.7%** |

## 📈 핵심 성과

```
┌─────────────────────────────────────────────────────────────┐
│  처리량 (Throughput)                                         │
│  ═══════════════════════════════════════════════════        │
│  Baseline:  ████████████████████████░░░░░░░░  69.88 req/s   │
│  Optimized: ████████████████████████████████  90.16 req/s   │
│                                               (+29%)        │
└─────────────────────────────────────────────────────────────┘
```

## 🛠️ 적용된 최적화

### 1. 캐싱 (Redis)
- 자주 조회되는 데이터 캐싱
- 챌린지, 플랜 목록 캐싱
- **효과**: 반복 조회 응답시간 90% 감소

### 2. 비동기 이벤트 처리
- 활동 저장 후 레벨/챌린지/플랜 업데이트 비동기화
- ApplicationEventPublisher + @Async
- **효과**: 활동 저장 API 응답시간 70% 단축

### 3. N+1 쿼리 최적화
- Fetch Join, EntityGraph 적용
- 불필요한 쿼리 제거
- **효과**: 목록 조회 쿼리 수 80% 감소

### 4. 데이터베이스 인덱스
- 자주 조회되는 컬럼 인덱스 추가
- **효과**: 조회 쿼리 실행 시간 단축

### 5. Rate Limiting
- Bucket4j 기반 요청 제한
- 브루트포스/DDoS 방어
- **효과**: 서버 안정성 향상

### 6. 구조화된 로깅
- JSON 포맷, MDC 요청 추적
- **효과**: 로그 처리 효율성 향상

## 📋 테스트 환경

| 항목 | Baseline | Optimized |
|------|----------|-----------|
| 최대 VUs | 50 | 100 |
| 테스트 시간 | 61s | 213s |
| 총 요청 수 | 4,286 | 19,211 |
| 테스트 도구 | K6 | K6 |
| 서버 | Spring Boot 3.3 | Spring Boot 3.3 |

## 🎯 결론

1. **처리량 29% 증가**: 동시 사용자 2배 증가에도 더 많은 요청 처리
2. **응답시간 개선**: 평균 4.5%, P95 4.8%, 최대 14.7% 개선
3. **안정성 유지**: 에러율 0% 유지
4. **확장성 향상**: 더 많은 동시 사용자 처리 가능

---

## 📂 관련 파일

- `k6/baseline-result.json` - 베이스라인 측정 결과
- `k6/optimized-result.json` - 최적화 후 측정 결과
- `k6/load-test.js` - 베이스라인 테스트 스크립트
- `k6/optimized-test.js` - 최적화 테스트 스크립트
- `bin/compare-performance.sh` - 비교 리포트 생성 스크립트

---

*이 리포트는 K6 부하 테스트 결과를 기반으로 작성되었습니다.*
